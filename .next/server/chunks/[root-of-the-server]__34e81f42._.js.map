{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Desktop/Curso/AppPagamento/App_Pagamento/lib/stripe.js"],"sourcesContent":["import Stripe from \"stripe\";\r\n\r\nconst stripeSecretKey = process.env.STRIPE_SECRET_KEY;\r\n\r\nif (!stripeSecretKey) {\r\n  throw new Error(\"Missing STRIPE_SECRET_KEY\");\r\n}\r\n\r\nexport const stripe = new Stripe(stripeSecretKey, {\r\n  apiVersion: \"2023-08-16\",\r\n});\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB,QAAQ,GAAG,CAAC,iBAAiB;AAErD,IAAI,CAAC,iBAAiB;IACpB,MAAM,IAAI,MAAM;AAClB;AAEO,MAAM,SAAS,IAAI,mKAAM,CAAC,iBAAiB;IAChD,YAAY;AACd","debugId":null}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Desktop/Curso/AppPagamento/App_Pagamento/app/api/pix/route.js"],"sourcesContent":["import { stripe } from \"@/lib/stripe\";\r\n\r\nexport async function POST(req) {\r\n  const { amount, customerName } = await req.json();\r\n\r\n  try {\r\n    const paymentIntent = await stripe.paymentIntents.create({\r\n      amount: Number(amount) * 100,\r\n      currency: \"brl\",\r\n      payment_method_types: [\"pix\"],\r\n\r\n      // ðŸ‘‡ ADICIONE ISSO PARA EVITAR O ERRO\r\n      payment_method_options: {\r\n        pix: {},\r\n      },\r\n\r\n      metadata: {\r\n        customerName,\r\n      },\r\n    });\r\n\r\n    const pixInfo = paymentIntent.next_action?.pix_display_qr_code;\r\n\r\n    return Response.json({\r\n      paymentIntentId: paymentIntent.id,\r\n      clientSecret: paymentIntent.client_secret,\r\n      qrCode: pixInfo?.image_url_png,\r\n      qrCodeText: pixInfo?.emv,\r\n      expiresAt: paymentIntent.expires_at,\r\n    });\r\n  } catch (err) {\r\n    return Response.json({ error: err.message }, { status: 400 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,KAAK,GAAG;IAC5B,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,GAAG,MAAM,IAAI,IAAI;IAE/C,IAAI;QACF,MAAM,gBAAgB,MAAM,yHAAM,CAAC,cAAc,CAAC,MAAM,CAAC;YACvD,QAAQ,OAAO,UAAU;YACzB,UAAU;YACV,sBAAsB;gBAAC;aAAM;YAE7B,sCAAsC;YACtC,wBAAwB;gBACtB,KAAK,CAAC;YACR;YAEA,UAAU;gBACR;YACF;QACF;QAEA,MAAM,UAAU,cAAc,WAAW,EAAE;QAE3C,OAAO,SAAS,IAAI,CAAC;YACnB,iBAAiB,cAAc,EAAE;YACjC,cAAc,cAAc,aAAa;YACzC,QAAQ,SAAS;YACjB,YAAY,SAAS;YACrB,WAAW,cAAc,UAAU;QACrC;IACF,EAAE,OAAO,KAAK;QACZ,OAAO,SAAS,IAAI,CAAC;YAAE,OAAO,IAAI,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IAC7D;AACF","debugId":null}}]
}